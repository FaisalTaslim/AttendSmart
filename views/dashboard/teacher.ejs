<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard</title>
    <link rel="stylesheet" href="/css/global/theme/light-theme.css">
    <link rel="stylesheet" href="/css/global/ui-components/font-family.css">
    <link rel="stylesheet" href="/css/global/ui-components/scrollbar.css">
    <link rel="stylesheet" href="/css/global/layout/header.css">
    <link rel="stylesheet" href="/css/global/layout/footer.css">
    <link rel="stylesheet" href="/css/global/ui-components/forms.css">
    <link rel="stylesheet" href="/css/global/ui-componenets/popup.css">
    <link rel="stylesheet" href="/css/page-specific/dashboard/teacher.css">

    <script src="https://kit.fontawesome.com/f75c66b724.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>

<body>
    <header>
        <div class="logo">
            <h1 class="mobile-hidden">AttendSmart</h1>
        </div>

        <nav class="nav-bar">
            <a href="/" class="nav-links-property">Home</a>
            <a href="/logout" class="nav-links-property">Logout</a>
            <a href="/guidebook" class="nav-links-property">GuideBook</a>
        </nav>

        <nav class="mobile-nav-container">
            <div class="nav-select">
                <select id="mobile-nav">
                    <option value="" disabled selected>-- Navigate --</option>
                    <option value="/">Home</option>
                    <option value="/logout">Logout</option>
                    <option value="/guidebook">GuideBook</option>
                </select>
            </div>
        </nav>
    </header>

    <main>
        <div class="main-1 teacher-shell">
            <section class="teacher-hero">
                <div class="hero-content">
                    <p class="hero-tag">Teacher Dashboard</p>
                    <h1>Manage classes, attendance, students, and reports in one place</h1>
                    <p>All teaching workflows are grouped into responsive cards for faster daily operations.</p>
                </div>
                <div class="hero-status">
                    <% if (setup===false) { %>
                        <div id="finish-setup" class="status-badge status-alert">Finish setup</div>
                    <% } else { %>
                        <div class="status-badge status-ok">Ready for Session</div>
                    <% } %>
                    <div class="status-badge">Teacher Portal</div>
                </div>
            </section>

            <section class="quick-grid">
                <article class="quick-card">
                    <h3>General</h3>
                    <div class="card-links">
                        <% if (setup===false) { %>
                            <p id="option-finish-setup">Finish setup</p>
                        <% } %>
                        <p id="option-profile">Profile</p>
                        <p id="option-settings">Settings</p>
                        <p id="option-support">Support</p>
                    </div>
                </article>

                <article class="quick-card">
                    <h3>Attendance</h3>
                    <div class="card-links">
                        <p id="option-start-session">Start Session</p>
                        <p id="option-edit-attendance">Edit Attendance</p>
                        <p id="option-attendance-history">Attendance History</p>
                    </div>
                </article>

                <article class="quick-card">
                    <h3>Students</h3>
                    <div class="card-links">
                        <p id="option-view-students">View Students</p>
                        <p id="option-mark-leave">Mark Leave</p>
                        <p id="option-student-attendance">Student Attendance</p>
                    </div>
                </article>

                <article class="quick-card">
                    <h3>Communication</h3>
                    <div class="card-links">
                        <p id="option-send-notice">Send Notice</p>
                        <p id="option-view-announcements">View Announcements</p>
                    </div>
                </article>

                <article class="quick-card">
                    <h3>Reports</h3>
                    <div class="card-links">
                        <p id="option-download-reports">Download Reports</p>
                        <p id="option-monthly-summary">Monthly Summary</p>
                    </div>
                </article>
            </section>

            <section class="content" style="display: none;">
                <button id="go-back" class="go-back" type="button">
                    <i class="fa-solid fa-arrow-left"></i> Go Back
                </button>

                <article id="content-finish-setup" class="content-panel" style="display: none;">
                    <h2>Finish Setup</h2>
                    <% if (setup===false) { %>
                        <section class="setup-uploads">
                            <div class="upload-card">
                                <h2>Complete the setup</h2>

                                <p>
                                    Read the <a href="/guidebook#face-upload" class="link">guide</a> before you upload the image
                                </p>

                                <form id="faceForm" enctype="multipart/form-data">
                                    <input type="file" id="face" name="faceImage" accept="image/png, image/jpeg" hidden>

                                    <label for="face" class="upload-label">
                                        <div class="upload-content">
                                            <div class="upload-icon"><i class="fa-solid fa-camera"></i></div>
                                            <p class="upload-title">Upload your clear face image</p>
                                            <p class="upload-subtitle">PNG or JPG â€¢ One face only</p>
                                        </div>
                                    </label>
                                </form>

                                <p class="tip">
                                    <b>Note:</b> You can update your face data later from settings.
                                </p>
                            </div>
                        </section>
                    <% } else { %>
                        <p>Your setup is already complete.</p>
                    <% } %>
                </article>

                <article id="content-profile" class="content-panel" style="display: none;">
                    <h2>Profile</h2>
                    <p>View and update your teaching profile details.</p>
                </article>

                <article id="content-settings" class="content-panel" style="display: none;">
                    <h2>Settings</h2>
                    <p>Update teacher dashboard preferences and account settings.</p>
                </article>

                <article id="content-support" class="content-panel" style="display: none;">
                    <h2>Support</h2>
                    <p>Reach support for technical or classroom workflow issues.</p>
                </article>

                <article id="content-start-session" class="content-panel" style="display: none;">
                    <div class="panel-header">
                        <h2>Start Session</h2>
                        <p>Generate a session code to begin attendance marking process.</p>
                    </div>

                    <div class="session-creation-grid">
                        <div class="session-config">
                            <form id="create-session-form" method="POST" action="/dashboard/teacher/start-session">
                                <div class="outer-group">
                                    <% if(orgType == 'school') { %> 
                                        <div class="input-group">
                                            <label for="stream-select">Select Stream</label>
                                            <select id="stream-select" name="stream" required>
                                                <option value="" disabled selected>-- Select Stream --</option>
                                                <option value="science">Science</option>
                                                <option value="commerce">Commerce</option>
                                                <option value="arts">Arts</option>
                                                <option value="neutral">Neutral</option>
                                            </select>
                                        </div>
                                    <%}%>
                                    <div class="input-group">
                                        <label for="department-select">Select Department</label>
                                        <select id="department-select" name="department" required>
                                            <% if (departments.length > 0) { %>
                                                <option value="" disabled selected>-- Select Department --</option>
                                                <option value="null">Null</option>
                                                <% for (let department of departments) { %>
                                                    <option value="<%=department%>"><%=department%></option>
                                                <% } %>
                                            <% } else { %>
                                                <option value="" disabled selected>-- No Departments --</option>
                                            <% } %>
                                        </select>
                                    </div>
                                    <div class="input-group">
                                        <label for="subject-select">Select Subject</label>
                                        <select id="subject-select" name="subject" required>
                                            <% if (subjects.length > 0) { %>
                                                <option value="" disabled selected>-- Select Subject --</option>
                                                <option value="null">Null</option>
                                                <% for (let subject of subjects) { %>
                                                    <option value="<%=subject%>"><%=subject%></option>
                                                <% } %>
                                            <% } else { %>
                                                <option value="" disabled selected>-- No Subjects --</option>
                                            <% } %>
                                        </select>
                                    </div>
                                </div>
                                <button type="submit" class="start-btn">
                                    <i class="fa-solid fa-bolt"></i> Start Session
                                </button>
                            </form>
                        </div>

                        <div class="session-result" id="session-result-display">
                            <div class="empty-state" style="<%= (typeof Session !== 'undefined' && Session) ? 'display: none;' : '' %>">
                                <i class="fa-solid fa-qrcode"></i>
                                <span>Session code will appear here</span>
                            </div>
                            <div class="active-state" style="<%= (typeof Session !== 'undefined' && Session) ? '' : 'display: none;' %>">
                                <span class="session-badge">Active Session</span>
                                <div class="code-box">
                                    <span id="display-code"><%= (typeof Session !== 'undefined' && Session) ? Session.sessionCode : '' %></span>
                                    <button class="copy-btn" type="button" title="Copy"><i class="fa-regular fa-copy"></i></button>
                                </div>
                                <p class="instruction">Share with students</p>
                            </div>
                        </div>
                    </div>
                </article>

                <article id="content-edit-attendance" class="content-panel" style="display: none;">
                    <h2>Edit Attendance</h2>
                    <p>Make attendance corrections for completed sessions.</p>
                </article>

                <article id="content-attendance-history" class="content-panel" style="display: none;">
                    <h2>Attendance History</h2>
                    <p>View past class sessions and attendance records.</p>
                </article>

                <article id="content-view-students" class="content-panel" style="display: none;">
                    <h2>View Students</h2>
                    <p>Browse student lists linked to your assigned classes.</p>
                </article>

                <article id="content-mark-leave" class="content-panel" style="display: none;">
                    <h2>Mark Leave</h2>
                    <p>Mark or verify approved leave against attendance sessions.</p>
                </article>

                <article id="content-student-attendance" class="content-panel" style="display: none;">
                    <h2>Student Attendance</h2>
                    <p>Inspect attendance details for specific students.</p>
                </article>

                <article id="content-send-notice" class="content-panel" style="display: none;">
                    <h2>Send Notice</h2>
                    <p>Send notices to class groups or selected students.</p>
                </article>

                <article id="content-view-announcements" class="content-panel" style="display: none;">
                    <h2>View Announcements</h2>
                    <p>Read latest academic and organizational announcements.</p>
                </article>

                <article id="content-download-reports" class="content-panel" style="display: none;">
                    <h2>Download Reports</h2>
                    <p>Download attendance and class reports for records.</p>
                </article>

                <article id="content-monthly-summary" class="content-panel" style="display: none;">
                    <h2>Monthly Summary</h2>
                    <p>Review monthly attendance performance at a glance.</p>
                </article>
            </section>
        </div>
    </main>

    <footer>
        <div class="foot-content">
            <div class="foot1">
                <div class="useful-links">
                    <p><strong>Useful-links</strong></p>
                    <a href="#register" class="links foot-links" target="_blank">Register</a>
                    <a href="#support-forms" class="links foot-links" target="_blank">Support</a>
                    <a href="/dashboard" class="links foot-links" target="_blank">Dashboard</a>
                </div>
                <div class="legal">
                    <p><strong>Legal</strong></p>
                    <a href="#" class="links foot-links" target="_blank">Terms & conditions</a>
                    <a href="#" class="links foot-links" target="_blank">Privacy Policy</a>
                    <a href="#" class="links foot-links" target="_blank">Refund Policy</a>
                </div>
            </div>
            <div class="foot2">
                <div class="socials">
                    <p><strong>Socials</strong></p>
                    <a href="#" class="links foot-links" target="_blank">
                        <i class="fa-brands fa-instagram"></i> | @faisal_9542
                    </a>
                    <a href="#" class="links foot-links" target="_blank">
                        <i class="fa-brands fa-discord"></i> | @famaeoxiaa
                    </a>
                    <a href="#" class="links foot-links" target="_blank">
                        <i class="fa-brands fa-github"></i> | @FaisalTaslim
                    </a>
                </div>
                <div class="contacts">
                    <p><strong>Contacts</strong></p>
                    <p><i class="fa-solid fa-phone"></i> | +91 7449925137 </p>
                    <p><i class="fa-solid fa-envelope"></i> | mailto: faisaltaslim79@gmail.com</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="/js/global/UI/rearrange-footer.js"></script>
    <% if (setup===false) { %>
        <script src="/js/global/face-api/face-api.min.js"></script>
        <script src="/js/global/face-api/detection/face-init.js"></script>
    <% } %>
    <script src="/js/page-specific/dashboard/teacher-employee/navigate-contents.js"></script>
</body>

</html>
