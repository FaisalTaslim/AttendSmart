<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <link rel="stylesheet" href="/css/global/global-layout.css">
    <link rel="stylesheet" href="/css/global/dB-global.css">
    <link rel="stylesheet" href="/css/page-specific/dashboard/corporate.css">
    <link rel="stylesheet" href="/css/global/forms.css">
    <link rel="stylesheet" href="/css/global/dark-theme.css">
    <link rel="stylesheet" href="/css/global/scrollbar.css">

    <script src="https://kit.fontawesome.com/f75c66b724.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Underdog&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Pacifico&family=Rock+Salt&family=WDXL+Lubrifont+TC&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="orientation-overlay">
        <p>Rotate your screen and refresh to use the dashboard</p>
    </div>
    <header>
        <nav id="navbar" class="">
            <div class="nav-group1">
                <div class="logo">
                    <p class="font-1"><strong>AttendSmart</strong></p>
                </div>
                <div class="nav-links">
                    <a href="/" class="nav-links-property hide">Home</a>
                </div>
            </div>
            <div class="nav-group2">
                <div class="nav-links">
                    <a href="/dashboard" class="nav-links-property hide">Dashboard</a>
                    <a href="/support" class="nav-links-property hide">Support</a>
                    <a href="/log" class="nav-links-property hide">Logs</a>
                    <a href="/register" class="nav-links-property hide" id="register">Register</a>
                    <div class="login-logout">
                        <% if (!isAuthenticated) { %>
                            <a href="/login" class="nav-links-property">Login</a>
                            <% } else { %>
                                <a href="/logout" class="nav-links-property hide">Logout</a>
                                <% } %>
                    </div>
                    <p class="nav-links-property"><i class="fa-solid fa-moon"></i></p>
                    <p class="nav-links-property" id="sun"><i class="fa-regular fa-sun"></i></p>
                    <p class="nav-links-property" id="menu-toggle"><i class="fa-solid fa-bars"></i></p>
                </div>
            </div>

            <div class="slide-menu">
                <div class="nav-close-icon">
                    <p class="sidemenu-heading"><strong>AttendSmart</strong></p>
                    <p class="nav-links-property"><i class="fa-solid fa-xmark" id="close-toggle"></i></p>
                </div>
                <div class="dash-head">
                    <h2><i class="fa-solid fa-route"></i> | Other pages</h2>
                    <div class="dash-head-nav">
                        <a href="/dashboard" class="nav-links-property">Dashboard</a>
                        <a href="/support" class="nav-links-property">Support</a>
                        <a href="/log" class="nav-links-property">Logs</a>
                        <a href="/register" class="nav-links-property" id="register">Register</a>
                        <a href="/login" class="nav-links-property">Login</a>
                    </div>
                </div>
                <div class="dash-head">
                    <h2><i class="fa-solid fa-gear"></i> | General Settings</h2>
                    <div class="dash-head-nav">
                        <p class="scedit-info-btn">Account info & Edit</p>
                        <p>Download Reports</p>
                        <p>Toggle Themes</p>
                        <p>Change Password</p>
                        <p>Enable Notifications</p>
                        <p>Delete Your Account</p>
                    </div>
                </div>
                <div class="dash-head">
                    <h2><i class="fa-solid fa-gear"></i> | System</h2>
                    <div class="dash-head-nav">
                        <p>Inbox</p>
                    </div>
                </div>
                <div class="dash-head">
                    <h2><i class="fa-solid fa-square-check"></i> | Attendance</h2>
                    <div class="dash-head-nav">
                        <p class="mark-att-btn">Mark Attendance</p>
                        <p>Attendance Overview</p>
                    </div>
                </div>
                <div class="dash-head">
                    <h2><i class="fa-solid fa-envelope"></i> | Communication</h2>
                    <div class="dash-head-nav">
                        <p class="scnotice-btn">View Notice</p>
                        <p class="scleave-btn">Request a Leave</p>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <main>
        <div class="main-section">
            <div class="dashboard-sidenav">
                <div class="dash-head">
                    <h2><i class="fa-solid fa-gear"></i> | General Settings</h2>
                    <div class="dash-head-nav">
                        <p class="scedit-info-btn">Account info & Edit</p>
                        <p>Download Reports</p>
                        <p>Toggle Themes</p>
                        <p>Change Password</p>
                        <p>Enable Notifications</p>
                        <p>Delete Your Account</p>
                    </div>
                </div>
                <div class="dash-head">
                    <h2><i class="fa-solid fa-gear"></i> | System</h2>
                    <div class="dash-head-nav">
                        <p>Inbox</p>
                    </div>
                </div>
                <div class="dash-head">
                    <h2><i class="fa-solid fa-square-check"></i> | Attendance</h2>
                    <div class="dash-head-nav">
                        <p class="mark-att-btn">Mark Attendance</p>
                        <p>Attendance Overview</p>
                    </div>
                </div>
                <div class="dash-head">
                    <h2><i class="fa-solid fa-envelope"></i> | Communication</h2>
                    <div class="dash-head-nav">
                        <p class="scnotice-btn">View Notice</p>
                        <p class="scleave-btn">Request a Leave</p>
                    </div>
                </div>
            </div>
            <div class="dashboard-contents">
                <div class="edit-info">
                    <h1>Edit Account Details</h1>
                    <form method="POST" action="/update-employee" class="employee-update-form">
                        <fieldset>
                            <legend>Personal Information</legend>
                            <div class="form-group">
                                <label for="uniqueId">Unique ID</label>
                                <input type="text" id="uniqueId" name="uniqueId" value="<%= uniqueId %>" readonly>
                            </div>

                            <div class="form-group">
                                <label for="userName">Full Name</label>
                                <input type="text" id="userName" name="userName" value="<%= userName %>">
                            </div>

                            <div class="form-group">
                                <label for="employeeId">Employee Id</label>
                                <input type="text" id="employeeId" name="employeeId" value="<%= employeeId %>">
                            </div>

                            <div class="form-group">
                                <label for="dept">Department</label>
                                <input type="text" id="dept" name="dept" value="<%= dept %>">
                            </div>

                            <div class="form-group">
                                <label for="shift">Select Shift:</label>
                                <select id="shift" name="shift" required>
                                    <option value="" disabled selected>Select a shift</option>
                                    <option value="day">Day Shift</option>
                                    <option value="night">Night Shift</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="designation">Designation</label>
                                <input type="text" id="designation" name="designation" value="<%= designation %>">
                            </div>
                        </fieldset>

                        <fieldset>
                            <legend>Contact Information</legend>
                            <div class="form-group">
                                <label for="contact">Contact Number</label>
                                <input type="tel" id="contact" name="contact" value="<%= contact %>">
                            </div>

                            <div class="form-group">
                                <label for="email">Email Address</label>
                                <input type="email" id="email" name="email" value="<%= email %>">
                            </div>
                        </fieldset>

                        <div style="text-align:center;">
                            <button type="submit" class="submit-btn">Save Changes</button>
                        </div>
                    </form>
                </div>
                <div class="notices">
                    <h2><i class="fa-solid fa-bell"></i> | Notices</h2>
                    <div id="notice-list" class="notice-list">
                        <% if (!notices || notices.length===0) { %>
                            <p>No notices available.</p>
                            <% } else { %>
                                <% notices.forEach(notice=> { %>
                                    <div class="notice-card">
                                        <div class="notice-date">
                                            <%= notice.dateTime %>
                                        </div>
                                        <p class="notice-text">
                                            <%= notice.noticeText %>
                                        </p>
                                    </div>
                                    <% }) %>
                                        <% } %>
                    </div>
                </div>
                <div class="request-leave-container">
                    <div class="request-leave">
                        <div class="request-leave-header">
                            <h2>📢| Request Leave</h2>
                            <button class="status-btn">View Leave Status</button>
                        </div>
                        <form id="leaveForm" method="POST" action="/request-leave-employees">
                            <fieldset>
                                <legend>Leave Details</legend>
                                <div class="form-group">
                                    <label for="userId">Enter your uniqueId</label>
                                    <input type="text" id="userId" name="uniqueId" required>

                                    <label for="leaveType">Leave Type</label>
                                    <select id="leaveType" name="leaveType" required>
                                        <option value="">-- Select Leave Type --</option>
                                        <option value="sick">Sick Leave</option>
                                        <option value="casual">Casual Leave</option>
                                        <option value="earned">Earned Leave</option>
                                        <option value="other">Other</option>
                                    </select>

                                    <label for="startDate">Start Date</label>
                                    <input type="date" id="startDate" name="startDate" required>

                                    <label for="endDate">End Date</label>
                                    <input type="date" id="endDate" name="endDate" required>

                                    <label for="reason">Reason</label>
                                    <textarea id="reason" name="reason" rows="4" placeholder="Enter reason for leave..."
                                        required></textarea>
                                </div>
                            </fieldset>

                            <div style="text-align:center;">
                                <button type="submit">Submit Request</button>
                            </div>
                        </form>
                    </div>
                    <div class="display-your-leave">
                        <div class="display-leave-header">
                            <h2>📝| Your Leave Requests</h2>
                            <button class="leave-go-back">Go back</button>
                        </div>
                        <div id="leave-request-list" class="leave-request-list">
                            <% if (!leaveRequests || leaveRequests.length===0) { %>
                                <p>No leave requests submitted.</p>
                                <% } else { %>
                                    <% leaveRequests.forEach(leave=> { %>
                                        <div class="leave-card">
                                            <p class="leave-dates">
                                                <%= leave.startDate %> to <%= leave.endDate %>
                                            </p>
                                            <p class="leave-type"><strong>Leave Type: </strong>
                                                <%= leave.leaveType %>
                                            </p>
                                            <p class="leave-reason">
                                                <strong>Reason:</strong><br>
                                                <%= leave.reason %> <br>
                                                    <strong>Status:</strong>
                                                    <%= leave.status %>
                                            </p>
                                        </div>
                                        <% }) %>
                                            <% } %>
                        </div>
                    </div>
                </div>
                <div class="container attendance-container">
                    <h1>Mark Attendance</h1>
                    <div class="section">
                        <div id="my-qr-reader"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <div class="foot-content">
            <div class="foot1">
                <div class="useful-links">
                    <p><strong>Useful-links</strong></p>
                    <a href="/register" class="links foot-links" target="_blank">Register</a>
                    <a href="/support" class="links foot-links" target="_blank">Support</a>
                    <a href="/log" class="links foot-links" target="_blank">LogBook</a>
                    <a href="/dashboard" class="links foot-links" target="_blank">Dashboard</a>
                </div>
                <div class="legal">
                    <p><strong>Legal</strong></p>
                    <a href="/terms" class="links foot-links" target="_blank">Terms & conditions</a>
                    <a href="/privacy" class="links foot-links" target="_blank">Privacy Policy</a>
                    <a href="/refund" class="links foot-links" target="_blank">Refund Policy</a>
                </div>
            </div>
            <div class="foot2">
                <div class="socials">
                    <p><strong>Socials</strong></p>
                    <a href="#" class="links foot-links" target="_blank"><i class="fa-brands fa-instagram"></i> |
                        @faisal_9542</a>
                    <a href="#" class="links foot-links" target="_blank"><i class="fa-brands fa-discord"></i> |
                        @famaeoxiaa</a>
                    <a href="#" class="links foot-links" target="_blank"><i class="fa-brands fa-github"></i> |
                        @FaisalTaslim</a>
                </div>
                <div class="contacts">
                    <p><strong>Contacts</strong></p>
                    <p><i class="fa-solid fa-phone"></i> | +91 7449925137 </p>
                    <p><i class="fa-solid fa-envelope"></i> | mailto: support@attendsmart.io</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="/js/global/sideNav.js"></script>
    <script src="/js/global/update-footerLayout-for-tablets.js"></script>
    <script src="/js/page-specific/dashboard/start-scanner.js"></script>
    <script src="/js/page-specific/dashboard/main-tabs-switching.js"></script>
    <script src="/js/global/detectOrientation.js"></script>
</body>

</html>